# Построение графика изменения длины очереди на сетевом интерфейсе{#appendix2}

$\quad$Файл данных для очереди представляет собой плоский файл, в котором имеется две колонки: время в секундах и размер очереди в пакетах, разделенные пробелом. Все, что нам нужно сделать - это отделить данные друг от друга, запись их в нужные структуры данных и позже данными для построения графика. Пример кода для функции обработки данных размера очереди представлен ниже. 


\begin{minted}
[
frame=lines,
framesep=2mm,
baselinestretch=1.2,
fontsize=\footnotesize,
linenos
]
{python}
'''
    Функция обработки данных изменения
    длины очереди. Разделяем данные из 
    предположения, что 1-й элемент - 
    значение времи (значение заносится в список x), 
    2-й элемент - длина очереди (значение 
    заносится в список y). 
    Функция возвращает список [x,y]
'''
def parse_queue_len(qlen_data_file):
    x_stats = []
    y_stats = []
    for line in qlen_data_file:
        line = line.split(" ")
        x_stats.append(float(line[0]))
        y_stats.append(float(line[1]))
    return [x_stats, y_stats]

\end{minted}

Имея список значений x и список значений y, построим график изменения длины очереди.

\begin{minted}
[
frame=lines,
framesep=2mm,
baselinestretch=1.2,
fontsize=\footnotesize,
linenos
]
{python}
'''
    Функция построения графика изменения длины очереди.
    На вход поступает список значений, где первый элемент -
    время, а второй элемент - список значений длины очереди.
    Графики сохраняются в заданном формате 
    (параметр plot_format) и в заданную 
    директорию (параметр folder)
'''
def plot_queue_len(stats, plot_format, folder):
    x_stats, y_stats = stats
    plt.plot(x_stats, y_stats, 'k', linewidth=1)
    plt.grid()
    plt.xticks(np.arange(0.0, x_stats[-1], step=10.0))
    plt.xlim(xmin=0, xmax=x_stats[-1])
    plt.xlabel("Время (с)")
    plt.ylabel("Размер очереди (пакеты)")
    plt.title("Размер очереди в течении времени")
    plt.savefig("{}queue_len.{}".format(folder, plot_format))
\end{minted}

Теперь мы можем соединить эти функци воедино в скриптовом файле, выбрать целевой файл, передать параметры для функций и построить график изменения длины очереди на сетевом интерфейсе.